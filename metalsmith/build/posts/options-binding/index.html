<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>options</title>
  <meta name="description" content="It&#x27;s about saying »Hello« to the world.">
	<link rel="stylesheet" href="/assets/css/code.css">
</head>
<body>
  <header>
    <p>
      <a href="/">Home</a>
    </p>
  </header>
  <h1>options</h1>

  <h3 id="purpose">Purpose</h3>
<p>The <code class="lang-apache"><span class="hljs-keyword"><span class="hljs-common">options</span></span></code> binding controls what options should appear in a drop-down list (i.e., a <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> element) or multi-select list (e.g., <code class="lang-mel">&lt;<span class="hljs-keyword">select</span> <span class="hljs-keyword">size</span>=<span class="hljs-string">'6'</span>&gt;</code>). This binding cannot be used with anything other than <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> elements.</p>
<p>The value you assign should be an array (or observable array). The <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> element will then display one item for each item in your array.</p>
<p>Note: For a multi-select list, to set which of the options are selected, or to read which of the options are selected, use <a href="selectedOptions-binding.html">the <code>selectedOptions</code> binding</a>. For a single-select list, you can also read and write the selected option using <a href="value-binding.html">the <code class="lang-ceylon"><span class="hljs-keyword">value</span></code> binding</a>.</p>
<h3 id="example-1-drop-down-list">Example 1: Drop-down list</h3>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>
    Destination country:
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"options: availableCountries"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> viewModel = {
    <span class="hljs-comment">// These are the initial options</span>
    availableCountries: ko.observableArray([<span class="hljs-string">'France'</span>, <span class="hljs-string">'Germany'</span>, <span class="hljs-string">'Spain'</span>])
};

<span class="hljs-comment">// ... then later ...</span>
viewModel.availableCountries.push(<span class="hljs-string">'China'</span>); <span class="hljs-comment">// Adds another option</span>
</code></pre>
<h3 id="example-2-multi-select-list">Example 2: Multi-select list</h3>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>
    Choose some countries you would like to visit:
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"options: availableCountries"</span> <span class="hljs-attribute">size</span>=<span class="hljs-value">"5"</span> <span class="hljs-attribute">multiple</span>=<span class="hljs-value">"true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> viewModel = {
    availableCountries: ko.observableArray([<span class="hljs-string">'France'</span>, <span class="hljs-string">'Germany'</span>, <span class="hljs-string">'Spain'</span>])
};
</code></pre>
<h3 id="example-3-drop-down-list-representing-arbitrary-javascript-objects-not-just-strings">Example 3: Drop-down list representing arbitrary JavaScript objects, not just strings</h3>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>
    Your country:
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"options: availableCountries,
                       optionsText: 'countryName',
                       value: selectedCountry,
                       optionsCaption: 'Choose...'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"visible: selectedCountry"</span>&gt;</span> <span class="hljs-comment">&lt;!-- Appears when you select something --&gt;</span>
    You have chosen a country with population
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: selectedCountry() ? selectedCountry().countryPopulation : 'unknown'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-comment">// Constructor for an object with two properties</span>
<span class="hljs-keyword">var</span> Country = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, population</span>) </span>{
    <span class="hljs-keyword">this</span>.countryName = name;
    <span class="hljs-keyword">this</span>.countryPopulation = population;
};

<span class="hljs-keyword">var</span> viewModel = {
    availableCountries : ko.observableArray([
        <span class="hljs-keyword">new</span> Country(<span class="hljs-string">"UK"</span>, <span class="hljs-number">65000000</span>),
        <span class="hljs-keyword">new</span> Country(<span class="hljs-string">"USA"</span>, <span class="hljs-number">320000000</span>),
        <span class="hljs-keyword">new</span> Country(<span class="hljs-string">"Sweden"</span>, <span class="hljs-number">29000000</span>)
    ]),
    selectedCountry : ko.observable() <span class="hljs-comment">// Nothing selected by default</span>
};
</code></pre>
<h3 id="example-4-drop-down-list-representing-arbitrary-javascript-objects-with-displayed-text-computed-as-a-function-of-the-represented-item">Example 4: Drop-down list representing arbitrary JavaScript objects, with displayed text computed as a function of the represented item</h3>
<pre><code class="lang-html"><span class="hljs-comment">&lt;!-- Same as example 3, except the &lt;select&gt; box expressed as follows: --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"options: availableCountries,
                   optionsText: function(item) {
                       return item.countryName + ' (pop: ' + item.countryPopulation + ')'
                   },
                   value: selectedCountry,
                   optionsCaption: 'Choose...'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
</code></pre>
<p>Note that the only difference between examples 3 and 4 is the <code>optionsText</code> value.</p>
<h3 id="parameters">Parameters</h3>
<ul>
<li><p>Main parameter</p>
<p>You should supply an array (or observable array). For each item, KO will add an <code class="lang-apache"><span class="hljs-tag">&lt;option&gt;</span></code> to the associated <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> node. Any previous options will be removed.</p>
<p>If your parameter's value is an array of strings, you don't need to give any other parameters. The <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> element will display an option for each string value. However, if you want to let the user choose from an array of <em>arbitrary JavaScript objects</em> (not merely strings), then see the <code>optionsText</code> and <code>optionsValue</code> parameters below.</p>
<p>If this parameter is an observable value, the binding will update the element's available options whenever the value changes. If the parameter isn't observable, it will only set the element's available options once and will not update them again later.</p>
</li>
<li><p>Additional parameters</p>
<ul>
<li><p><code>optionsCaption</code></p>
<p>Sometimes, you might not want to select any particular option by default. But a single-select drop-down list usually starts with some item selected, so how can you avoid preselecting something? The usual solution is to prefix the list of options with a special dummy option that just reads "Select an item" or "Please choose an option" or similar, and have that one selected by default.</p>
<p>This easy to do: just add an additional parameter with name <code>optionsCaption</code>, with its value being a string to display. For example:</p>
<p><code class="lang-armasm">&lt;<span class="hljs-keyword">select </span><span class="hljs-preprocessor">data</span>-<span class="hljs-keyword">bind='options: </span>myOptions, optionsCaption: <span class="hljs-string">"Select an item..."</span>, value: myChosenValue<span class="hljs-string">'&gt;&lt;/select&gt;</span></code></p>
<p>KO will prefix the list of items with one that displays the text "Select an item..." and has the value <code class="lang-actionscript"><span class="hljs-literal">undefined</span></code>. So, if <code>myChosenValue</code> holds the value <code class="lang-actionscript"><span class="hljs-literal">undefined</span></code> (which observables do by default), then the dummy option will be selected. If the <code>optionsCaption</code> parameter is an observable, then the text of the initial item will update as the observable's value changes.</p>
</li>
<li><p><code>optionsText</code></p>
<p>See Example 3 above to see how you can bind <code class="lang-apache"><span class="hljs-keyword"><span class="hljs-common">options</span></span></code> to an array of arbitrary JavaScript object - not just strings. In this case, you need to choose which of the objects' properties should be displayed as the text in the drop-down list or multi-select list. Example 3 shows how you can specify that property name by passing an additional parameter called <code>optionsText</code>.</p>
<p>If you don't want to display just a simple property value as the text for each item in the dropdown, you can pass a JavaScript function for the <code>optionsText</code> option and supply your own arbitrary logic for computing the displayed text in terms of the represented object. See Example 4 above, which shows how you could generate the displayed text by concatenating together multiple property values.</p>
</li>
<li><p><code>optionsValue</code></p>
<p>Similar to <code>optionsText</code>, you can also pass an additional parameter called <code>optionsValue</code> to specify which of the objects' properties should be used to set the <code class="lang-ceylon"><span class="hljs-keyword">value</span></code> attribute on the <code class="lang-apache"><span class="hljs-tag">&lt;option&gt;</span></code> elements that KO generates. You can also specify a JavaScript function to determine this value. This function will receive the selected item as its only argument and should return a string to use for the <code class="lang-apache"><span class="hljs-tag">&lt;option&gt;</span></code> element's value attribute.</p>
<p>Typically you'd only want to use <code>optionsValue</code> as a way of ensuring that KO can correctly retain selection when you update the set of available options. For example, if you're repeatedly getting a list of "car" objects via Ajax calls and want to ensure that the selected car is preserved, you might need to set <code>optionsValue</code> to <code class="lang-1c"><span class="hljs-string">"carId"</span></code> or whatever unique identifier each "car" object has, otherwise KO won't necessarily know which of the previous "car" objects corresponds to which of the new ones.</p>
</li>
<li><p><code>optionsIncludeDestroyed</code></p>
<p>Sometimes you may want to mark an array entry as deleted, but without actually losing record of its existence. This is known as a non-destructive delete. For details of how to do this, see <a href="observableArrays.html#destroy_and_destroyall_note_usually_relevant_to_ruby_on_rails_developers_only">the destroy function on <code>observableArray</code></a>.</p>
<p>By default, the options binding will skip over (i.e., hide) any array entries that are marked as destroyed. If you want to show destroyed entries, then specify this additional parameter like:</p>
<p><code class="lang-fortran">&lt;<span class="hljs-keyword">select</span> <span class="hljs-type">data</span>-<span class="hljs-keyword">bind</span>=<span class="hljs-string">'options: myOptions, optionsIncludeDestroyed: true'</span>&gt;&lt;/<span class="hljs-keyword">select</span>&gt;</code></p>
</li>
<li><p><code>optionsAfterRender</code></p>
<p>If you need to run some further custom logic on the generated <code class="lang-cmake"><span class="hljs-keyword">option</span></code> elements, you can use the <code>optionsAfterRender</code> callback. See Note 2 below.</p>
</li>
<li><p><code>selectedOptions</code></p>
<p>For a multi-select list, you can read and write the selection state using <code>selectedOptions</code>. Technically this is a separate binding, so it has <a href="selectedOptions-binding.html">its own documentation</a>.</p>
</li>
<li><p><code>valueAllowUnset</code></p>
<p>If you want Knockout to allow your model property to take values that have no corresponding entry in your <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> element (and display this by making the <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> element blank), then see <a href="value-binding.html#using-valueallowunset-with-select-elements">documentation for <code>valueAllowUnset</code></a>.</p>
</li>
</ul>
</li>
</ul>
<h3 id="note-1-selection-is-preserved-when-setting-changing-options">Note 1: Selection is preserved when setting/changing options</h3>
<p>When the <code class="lang-apache"><span class="hljs-keyword"><span class="hljs-common">options</span></span></code> binding changes the set of options in your <code class="lang-apache"><span class="hljs-tag">&lt;select&gt;</span></code> element, KO will leave the user's selection unchanged where possible. So, for a single-select drop-down list, the previously selected option value will still be selected, and for a multi-select list, all the previously selected option values will still be selected (unless, of course, you've removed one or more of those options).</p>
<p>That's because the <code class="lang-apache"><span class="hljs-keyword"><span class="hljs-common">options</span></span></code> binding tries to be independent of the <code class="lang-ceylon"><span class="hljs-keyword">value</span></code> binding (which controls selection for a single-select list) and the <code>selectedOptions</code> binding (which controls selection for a multi-select list).</p>
<h3 id="note-2-post-processing-the-generated-options">Note 2: Post-processing the generated options</h3>
<p>If you need to run some further custom logic on the generated <code class="lang-cmake"><span class="hljs-keyword">option</span></code> elements, you can use the <code>optionsAfterRender</code> callback. The callback function is invoked each time an <code class="lang-cmake"><span class="hljs-keyword">option</span></code> element is inserted into the list, with the following parameters:</p>
<ol>
<li>The inserted <code class="lang-cmake"><span class="hljs-keyword">option</span></code> element</li>
<li>The data item against which it is bound, or <code class="lang-actionscript"><span class="hljs-literal">undefined</span></code> for the caption element</li>
</ol>
<p>Here's an example that uses <code>optionsAfterRender</code> to add a <code class="lang-bash"><span class="hljs-built_in">disable</span></code> binding to each option.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">size</span>=<span class="hljs-value">3</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"
    options: myItems,
    optionsText: 'name',
    optionsValue: 'id',
    optionsAfterRender: setOptionDisable"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> vm = {
    myItems: [
        { name: <span class="hljs-string">'Item 1'</span>, id: <span class="hljs-number">1</span>, disable: ko.observable(<span class="hljs-literal">false</span>)},
        { name: <span class="hljs-string">'Item 3'</span>, id: <span class="hljs-number">3</span>, disable: ko.observable(<span class="hljs-literal">true</span>)},
        { name: <span class="hljs-string">'Item 4'</span>, id: <span class="hljs-number">4</span>, disable: ko.observable(<span class="hljs-literal">false</span>)}
    ],
    setOptionDisable: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">option, item</span>) </span>{
        ko.applyBindingsToNode(option, {disable: item.disable}, item);
    }
};
ko.applyBindings(vm);
</code></pre>
<h3 id="dependencies">Dependencies</h3>
<p>None, other than the core Knockout library.</p>


  <footer>
    <p>Generated with Metalsmith &mdash; <a href="http://metalsmith.io">http://metalsmith.io</a></p>
  </footer>

</body>
</html>
