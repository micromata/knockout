<p>Knockout allows you to implement sophisticated client-side interactivity, but almost all web applications also need to exchange data with the server, or at least to serialize the data for local storage. The most convenient way to exchange or store data is in <a href="http://json.org/">JSON format</a> - the format that the majority of Ajax applications use today.</p>
<h3 id="loading-or-saving-data">Loading or Saving Data</h3>
<p>Knockout doesn't force you to use any one particular technique to load or save data. You can use whatever mechanism is a convenient fit for your chosen server-side technology. The most commonly-used mechanism is jQuery's Ajax helper methods, such as <a href="http://api.jquery.com/jQuery.getJSON/"><code>getJSON</code></a>, <a href="http://api.jquery.com/jQuery.post/"><code class="lang-livecodeserver"><span class="hljs-built_in">post</span></code></a>, and <a href="http://api.jquery.com/jQuery.ajax/"><code>ajax</code></a>. You can fetch data from the server:</p>
<pre><code class="lang-javascript">  $.getJSON(<span class="hljs-string">"/some/url"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
      <span class="hljs-comment">// Now use this data to update your view models,</span>
      <span class="hljs-comment">// and Knockout will update your UI automatically</span>
  })
</code></pre>
<p>... or you can send data to the server:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> data = <span class="hljs-comment">/* Your data in JSON format - see below */</span>;
$.post(<span class="hljs-string">"/some/url"</span>, data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">returnedData</span>) </span>{
    <span class="hljs-comment">// This callback is executed if the post was successful</span>
})
</code></pre>
<p>Or, if you don't want to use jQuery, you can use any other mechanism for loading or saving JSON data. So, all Knockout needs to help you do is:</p>
<ul>
<li>For saving, get your view model data into a simple JSON format so you can send it using one of the above techniques</li>
<li>For loading, update your view model using data that you've received using one of the above techniques</li>
</ul>
<h3 id="converting-view-model-data-to-plain-json">Converting View Model Data to Plain JSON</h3>
<p>Your view models <em>are</em> JavaScript objects, so in a sense, you could just serialize them as JSON using any standard JSON serializer, such as <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify</a> (a native function in modern browsers), or the <a href="https://github.com/douglascrockford/JSON-js/blob/master/json2.js"><code class="lang-css"><span class="hljs-tag">json2</span><span class="hljs-class">.js</span></code></a> library. However, your view models probably contain observables, computed observables, and observable arrays, which are implemented as JavaScript functions and therefore won't always serialize cleanly without additional work on your behalf.</p>
<p>To make it easy to serialize view model data, including observables and the like, Knockout includes two helper functions:</p>
<ul>
<li><code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJS</span></code> --- this clones your view model's object graph, substituting for each observable the current value of that observable, so you get a plain copy that contains only your data and no Knockout-related artifacts</li>
<li><code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJSON</span></code> --- this produces a JSON string representing your view model's data. Internally, it simply calls <code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJS</span></code> on your view model, and then uses the browser's native JSON serializer on the result. Note: for this to work on older browsers that have no native JSON serializer (e.g., IE 7 or earlier), you must also reference the <a href="https://github.com/douglascrockford/JSON-js/blob/master/json2.js"><code class="lang-css"><span class="hljs-tag">json2</span><span class="hljs-class">.js</span></code></a> library.</li>
</ul>
<p>For example, define a view model as follows:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> viewModel = {
    firstName : ko.observable(<span class="hljs-string">"Bert"</span>),
    lastName : ko.observable(<span class="hljs-string">"Smith"</span>),
    pets : ko.observableArray([<span class="hljs-string">"Cat"</span>, <span class="hljs-string">"Dog"</span>, <span class="hljs-string">"Fish"</span>]),
    type : <span class="hljs-string">"Customer"</span>
};
viewModel.hasALotOfPets = ko.computed(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pets().length &gt; <span class="hljs-number">2</span>
}, viewModel)
</code></pre>
<p>This contains a mix of observables, computed observables, observable arrays, and plain values. You can convert it to a JSON string suitable for sending to the server using <code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJSON</span></code> as follows:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> jsonData = ko.toJSON(viewModel);

<span class="hljs-comment">// Result: jsonData is now a string equal to the following value</span>
<span class="hljs-comment">// '{"firstName":"Bert","lastName":"Smith","pets":["Cat","Dog","Fish"],"type":"Customer","hasALotOfPets":true}'</span>
</code></pre>
<p>Or, if you just want the plain JavaScript object graph <em>before</em> serialization, use <code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJS</span></code> as follows:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> plainJs = ko.toJS(viewModel);

<span class="hljs-comment">// Result: plainJS is now a plain JavaScript object in which nothing is observable. It's just data.</span>
<span class="hljs-comment">// The object is equivalent to the following:</span>
<span class="hljs-comment">//   {</span>
<span class="hljs-comment">//      firstName: "Bert",</span>
<span class="hljs-comment">//      lastName: "Smith",</span>
<span class="hljs-comment">//      pets: ["Cat","Dog","Fish"],</span>
<span class="hljs-comment">//      type: "Customer",</span>
<span class="hljs-comment">//      hasALotOfPets: true</span>
<span class="hljs-comment">//   }</span>
</code></pre>
<p>Note that <code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJSON</span></code> accepts the same arguments as <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify</a>. For example, it can be useful to have a "live" representation of your view model data when debugging a Knockout application. To generate a nicely formatted display for this purpose, you can pass the <em>spaces</em> argument into <code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.toJSON</span></code> and bind against your view model like:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">pre</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: ko.toJSON($root, null, 2)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">pre</span>&gt;</span>
</code></pre>
<h3 id="updating-view-model-data-using-json">Updating View Model Data using JSON</h3>
<p>If you've loaded some data from the server and want to use it to update your view model, the most straightforward way is to do it yourself. For example,</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Load and parse the JSON</span>
<span class="hljs-keyword">var</span> someJSON = <span class="hljs-comment">/* Omitted: fetch it from the server however you want */</span>;
<span class="hljs-keyword">var</span> parsed = <span class="hljs-built_in">JSON</span>.parse(someJSON);

<span class="hljs-comment">// Update view model properties</span>
viewModel.firstName(parsed.firstName);
viewModel.pets(parsed.pets);
</code></pre>
<p>In many scenarios, this direct approach is the simplest and most flexible solution. Of course, as you update the properties on your view model, Knockout will take care of updating the visible UI to match it.</p>
<p>However, many developers prefer to use a more conventions-based approach to updating their view models using incoming data without manually writing a line of code for every property to be updated. This can be beneficial if your view models have many properties, or deeply nested data structures, because it can greatly reduce the amount of manual mapping code you need to write. For more details about this technique, see <a href="#plugins-mapping">the knockout.mapping plugin</a>.</p>
