<p>A <em>binding context</em> is an object that holds data that you can reference from your bindings. While applying bindings, Knockout automatically creates and manages a hierarchy of binding contexts. The root level of the hierarchy refers to the <code>viewModel</code> parameter you supplied to <code class="lang-stylus">ko.<span class="hljs-function"><span class="hljs-title">applyBindings</span><span class="hljs-params">(viewModel)</span></span></code>. Then, each time you use a control flow binding such as <a href="with-binding.html"><code class="lang-actionscript"><span class="hljs-keyword">with</span></code></a> or <a href="foreach-binding.html"><code class="lang-cmake"><span class="hljs-keyword">foreach</span></code></a>, that creates a child binding context that refers to the nested view model data.</p>
<p>Bindings contexts offer the following special properties that you can reference in any binding:</p>
<ul>
<li><p><code class="lang-xquery"><span class="hljs-variable">$parent</span></code></p>
<p>  This is the view model object in the parent context, the one immeditely outside the current context. In the root context, this is undefined. Example:</p>
</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">h1</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: name"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"with: manager"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Now we're inside a nested binding context --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: name"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> is the
    manager of <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: $parent.name"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<ul>
<li><p><code class="lang-xquery"><span class="hljs-variable">$parents</span></code></p>
<p>  This is an array representing all of the parent view models:</p>
<p>  <code class="lang-xquery"><span class="hljs-variable">$parents</span>[<span class="hljs-number">0</span>]</code> is the view model from the parent context (i.e., it's the same as <code class="lang-xquery"><span class="hljs-variable">$parent</span></code>)</p>
<p>  <code class="lang-xquery"><span class="hljs-variable">$parents</span>[<span class="hljs-number">1</span>]</code> is the view model from the grandparent context</p>
<p>  <code class="lang-xquery"><span class="hljs-variable">$parents</span>[<span class="hljs-number">2</span>]</code> is the view model from the great-grandparent context</p>
<p>  ... and so on.</p>
</li>
<li><p><code class="lang-xquery"><span class="hljs-variable">$root</span></code></p>
<p>  This is the main view model object in the root context, i.e., the topmost parent context. It's usually the object that was passed to <code class="lang-css"><span class="hljs-tag">ko</span><span class="hljs-class">.applyBindings</span></code>. It is equivalent to <code class="lang-xquery"><span class="hljs-variable">$parents</span>[<span class="hljs-variable">$parents</span>.length - <span class="hljs-number">1</span>]</code>.</p>
</li>
<li><p><code class="lang-xquery"><span class="hljs-variable">$data</span></code></p>
<p>  This is the view model object in the current context. In the root context, <code class="lang-xquery"><span class="hljs-variable">$data</span></code> and <code class="lang-xquery"><span class="hljs-variable">$root</span></code> are equivalent. Inside a nested binding context, this parameter will be set to the current data item (e.g., inside a <code class="lang-http"><span class="hljs-attribute">with</span>: <span class="hljs-string">person</span></code> binding, <code class="lang-xquery"><span class="hljs-variable">$data</span></code> will be set to <code class="lang-inform7"><span class="hljs-keyword">person</span></code>). <code class="lang-xquery"><span class="hljs-variable">$data</span></code> is useful when you want to reference the viewmodel itself, rather than a property on the viewmodel. Example:</p>
</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">ul</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"foreach: ['cats', 'dogs', 'fish']"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>The value is <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: $data"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
</code></pre>
<ul>
<li><p><code class="lang-xquery"><span class="hljs-variable">$index</span></code> (only available within <code class="lang-cmake"><span class="hljs-keyword">foreach</span></code> bindings)</p>
<p>  This is the zero-based index of the current array entry being rendered by a <code class="lang-cmake"><span class="hljs-keyword">foreach</span></code> binding. Unlike the other binding context properties, <code class="lang-xquery"><span class="hljs-variable">$index</span></code> is an observable and is updated whenever the index of the item changes (e.g., if items are added to or removed from the array).</p>
</li>
<li><p><code class="lang-xquery"><span class="hljs-variable">$parentContext</span></code></p>
<p>  This refers to the binding context object at the parent level. This is different from <code class="lang-xquery"><span class="hljs-variable">$parent</span></code>, which refers to the <em>data</em> (not binding context) at the parent level. This is useful, for example, if you need to access the index value of an outer <code class="lang-cmake"><span class="hljs-keyword">foreach</span></code> item from an inner context (usage: <code class="lang-xquery"><span class="hljs-variable">$parentContext</span>.<span class="hljs-variable">$index</span></code>). This is undefined in the root context.</p>
</li>
<li><p><code class="lang-xquery"><span class="hljs-variable">$rawData</span></code></p>
<p>  This is the raw view model value in the current context. Usually this will be the same as <code class="lang-xquery"><span class="hljs-variable">$data</span></code>, but if the view model provided to Knockout is wrapped in an observable, <code class="lang-xquery"><span class="hljs-variable">$data</span></code> will be the unwrapped view model, and <code class="lang-xquery"><span class="hljs-variable">$rawData</span></code> will be the observable itself.</p>
</li>
</ul>
<p>The following special variables are also available in bindings, but are not part of the binding context object:</p>
<ul>
<li><p><code class="lang-xquery"><span class="hljs-variable">$context</span></code></p>
<p>  This refers to the current binding context object. This may be useful if you want to access properties of the context when they might also exist in the view model, or if you want to pass the context object to a helper function in your view model.</p>
</li>
<li><p><code class="lang-xquery"><span class="hljs-variable">$element</span></code></p>
<p>  This is the element DOM object (for virtual elements, it will be the comment DOM object) of the current binding. This can be useful if a binding needs to access an attribute of the current element. Example:</p>
</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"item1"</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: $element.id"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<h3 id="controlling-or-modifying-the-binding-context-in-custom-bindings">Controlling or modifying the binding context in custom bindings</h3>
<p>Just like the built-in bindings <a href="#with-binding"><code class="lang-actionscript"><span class="hljs-keyword">with</span></code></a> and <a href="#foreach-binding"><code class="lang-cmake"><span class="hljs-keyword">foreach</span></code></a>, custom bindings can change the binding context for their descendant elements, or provide special properties by extending the binding context object. This is described in detail under <a href="#custom-bindings-controlling-descendant-bindings">creating custom bindings that control descendant bindings</a>.</p>
